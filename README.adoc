= spring-boot-thymeleaf-layouts image:https://travis-ci.org/daggerok/spring-boot-thymeleaf-layouts.svg?branch=master["Build Status", link="https://travis-ci.org/daggerok/spring-boot-thymeleaf-layouts"]

//tag::content[]
This repository contains example of using thymeleaf layouts (`nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect`)
In addition here also demonstrated webflux interceptor (WebFilter)

HOW TO:

* add dialect dependency

* add java configuration

[source,kotlin]
----
@Configuration
class ThymeleafLayoutConfig {
  @Bean fun layoutDialect() = LayoutDialect()
}
----

* add common layout `src/main/resources/templates/layouts/default.html`

[source,xml]
----
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <title>Common title</title>
  <!-- common resources -->
  <link rel="shortcut icon" th:href="@{/favicon.ico}" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" th:href="@{/common/styles.css}" href="/common/styles.css">
</head>
<body>
<!-- common content -->
<header>
  <ul>
    <li><a th:href="@{/}" href="/">Home page</a></li>
    <li><a th:href="@{/info}" href="/info">Info page</a></li>
  </ul>
</header>
<!-- app-content / app-footer to be replaced in each view -->
<section layout:fragment="app-content">
  <p>Common layout fragment</p>
</section>
<footer>
  <h5>App footer</h5>
  <p layout:fragment="app-footer">Common app footer</p>
</footer>
</body>
</html>
----

* add views `src/main/resources/templates/index.html` or `src/main/resources/templates/info.html`
with proper declaration: `<html layout:decorate="~{layouts/default}">`

[source,html]
----
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">
<head>
  <title>

    title per view

  </title>
  <link rel="stylesheet" th:href="@{/additional-styles.css}" href="/additional-styles.css">
</head>
<body>
<section layout:fragment="app-content">
  <h3>Info header h3</h3>
  <p>

    section content per view

  </p>
</section>
<footer>
  <p layout:fragment="app-footer">

    footer content per view

  </p>
</footer>
</body>
</html>
----

== build / run

.gradle
[source,bash]
----
./gradlew
java -jar build/libs/*.jar
bash build/libs/*.jar

./gradlew build composeUp
./gradlew composeDown
----

.maven
[source,bash]
----
./mvnw
java -jar target/*.jar
bash target/*.jar

./mvnw; ./mvnw com.dkanejs.maven.plugins:docker-compose-maven-plugin:1.0.1:up
./mvnw com.dkanejs.maven.plugins:docker-compose-maven-plugin:1.0.1:down
----

links:

- link:https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout[Thymeleaf 3 is natively supports layouts]
- link:https://ultraq.github.io/thymeleaf-layout-dialect/Examples.html#layouts[Thymeleaf layouts docs]
- link:https://github.com/ultraq/thymeleaf-layout-dialect[Github: ultraq/thymeleaf-layout-dialect]

generated by link:https://github.com/daggerok/generator-jvm/[jvm] yeoman generator
//end::content[]
